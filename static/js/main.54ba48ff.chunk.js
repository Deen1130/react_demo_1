(this.webpackJsonp22tut=this.webpackJsonp22tut||[]).push([[0],{15:function(t,e,n){},53:function(t,e,n){"use strict";n.r(e);var c=n(1),s=n.n(c),r=n(24),i=n.n(r),o=(n(15),n(7)),a=function(){var t=Object(c.useState)({width:void 0,height:void 0}),e=Object(o.a)(t,2),n=e[0],s=e[1];return Object(c.useEffect)((function(){var t=function(){s({width:window.innerWidth,height:window.innerHeight})};return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),n},j=n(0),u=function(t){var e=t.title,n=a().width;return Object(j.jsxs)("header",{className:"Header",children:[Object(j.jsx)("h1",{children:e}),n<768?Object(j.jsx)("span",{children:"\u884c\u52d5"}):n<992?Object(j.jsx)("span",{children:"\u5e73\u677f"}):Object(j.jsx)("span",{children:"\u684c\u6a5f"})]})},l=n(4),b=n(2),d=function(){var t=Object(b.g)((function(t){return t.posts})),e=Object(b.g)((function(t){return t.search})),n=Object(b.f)((function(t){return t.setSearch})),s=Object(b.f)((function(t){return t.setSearchResults}));return Object(c.useEffect)((function(){var n=t.filter((function(t){return t.body.toLowerCase().includes(e.toLowerCase())||t.title.toLowerCase().includes(e.toLowerCase())}));s(n.reverse())}),[t,e,s]),Object(j.jsxs)("nav",{className:"Nav",children:[Object(j.jsxs)("form",{className:"searchForm",onSubmit:function(t){return t.preventDefault()},children:[Object(j.jsx)("label",{htmlFor:"search",children:"Search Posts"}),Object(j.jsx)("input",{id:"search",type:"text",placeholder:"Search Posts",value:e,onChange:function(t){return n(t.target.value)}})]}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:Object(j.jsx)(l.b,{to:"/",children:"Home"})}),Object(j.jsx)("li",{children:Object(j.jsx)(l.b,{to:"post",children:"Post"})}),Object(j.jsx)("li",{children:Object(j.jsx)(l.b,{to:"about",children:"About"})})]})]})},O=function(){var t=Object(b.g)((function(t){return t.postCount}));return Object(j.jsx)("footer",{className:"Footer",children:Object(j.jsxs)("div",{children:["\u5171 ",t," \u7bc7\u6587\u7ae0"]})})},h=n(3),f=function(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(u,{title:"\u963f\u8c93\u90e8\u843d\u683c"}),Object(j.jsx)(d,{}),Object(j.jsx)(h.a,{}),Object(j.jsx)(O,{})]})},x=function(t){var e=t.post;return Object(j.jsxs)("article",{className:"post",children:[Object(j.jsxs)(l.b,{to:"post/".concat(e.id),children:[Object(j.jsx)("h2",{children:e.title}),Object(j.jsx)("p",{className:"postDate",children:e.datetime})]}),Object(j.jsx)("p",{className:"postBody",children:e.body.length<=25?e.body:"".concat(e.body.slice(0,25),"...")})]})},p=function(t){var e=t.posts;return Object(j.jsx)(j.Fragment,{children:e.map((function(t){return Object(j.jsx)(x,{post:t},t.id)}))})},m=function(t){var e=t.isLoading,n=t.fetchError,c=Object(b.g)((function(t){return t.searchResults}));return Object(j.jsxs)("main",{className:"Home",children:[e&&Object(j.jsx)("p",{className:"statusMsg",children:"\u52a0\u8f09\u6587\u7ae0\u4e2d..."}),!e&&n&&Object(j.jsx)("p",{className:"statusMsg",style:{color:"red"},children:n}),!e&&!n&&(c.length?Object(j.jsx)(p,{posts:c}):Object(j.jsx)("p",{className:"statusMsg",children:"\u6c92\u6709\u53ef\u986f\u793a\u7684\u6587\u7ae0"}))]})},v=n(54),g=function(){var t=Object(h.g)(),e=Object(b.g)((function(t){return t.postTitle})),n=Object(b.g)((function(t){return t.postBody})),c=Object(b.f)((function(t){return t.addPost})),s=Object(b.f)((function(t){return t.setPostTitle})),r=Object(b.f)((function(t){return t.setPostBody}));return Object(j.jsxs)("main",{className:"NewPost",children:[Object(j.jsx)("h2",{children:"\u65b0\u589e\u6587\u7ae0"}),Object(j.jsxs)("form",{className:"newPostForm",onSubmit:function(s){s.preventDefault();var r=(new Date).getTime(),i=Object(v.a)(new Date,"MMMM dd, yyyy pp");c({id:r,title:e,datetime:i,body:n}),t("/")},children:[Object(j.jsx)("label",{htmlFor:"postTitle",children:"\u6587\u7ae0\u6a19\u984c:"}),Object(j.jsx)("input",{id:"postTitle",type:"text",required:!0,value:e,onChange:function(t){return s(t.target.value)}}),Object(j.jsx)("label",{htmlFor:"postBody",children:"\u6587\u7ae0\u5167\u5bb9:"}),Object(j.jsx)("textarea",{id:"postBody",required:!0,value:n,onChange:function(t){return r(t.target.value)}}),Object(j.jsx)("button",{type:"submit",children:"\u63d0\u4ea4"})]})]})},y=function(){var t=Object(h.g)(),e=Object(h.h)().id,n=Object(b.g)((function(t){return t.getPostById}))(e),c=Object(b.f)((function(t){return t.deletePost}));return Object(j.jsx)("main",{className:"PostPage",children:Object(j.jsxs)("article",{className:"post",children:[n&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:n.title}),Object(j.jsx)("p",{className:"postDate",children:n.datetime}),Object(j.jsx)("p",{className:"postBody",children:n.body}),Object(j.jsx)(l.b,{to:"/edit/".concat(n.id),children:Object(j.jsx)("button",{className:"editButton",children:"\u7de8\u8f2f\u6587\u7ae0"})}),Object(j.jsx)("button",{className:"deleteButton",onClick:function(){return function(e){c(e),t("/")}(n.id)},children:"\u522a\u9664\u6587\u7ae0"})]}),!n&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"\u627e\u4e0d\u5230\u6587\u7ae0"}),Object(j.jsx)("p",{children:Object(j.jsx)(l.b,{to:"/",children:"\u8fd4\u56de\u9996\u9801"})})]})]})})},w=function(){var t=Object(h.g)(),e=Object(h.h)().id,n=Object(b.g)((function(t){return t.editTitle})),s=Object(b.g)((function(t){return t.editBody})),r=Object(b.g)((function(t){return t.getPostById}))(e),i=Object(b.f)((function(t){return t.editPost})),o=Object(b.f)((function(t){return t.setEditTitle})),a=Object(b.f)((function(t){return t.setEditBody}));Object(c.useEffect)((function(){r&&(o(r.title),a(r.body))}),[r,o,a]);return Object(j.jsxs)("main",{className:"NewPost",children:[n&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"\u7de8\u8f2f\u6587\u7ae0"}),Object(j.jsxs)("form",{className:"newPostForm",onSubmit:function(t){return t.preventDefault()},children:[Object(j.jsx)("label",{htmlFor:"postTitle",children:"\u6587\u7ae0\u6a19\u984c:"}),Object(j.jsx)("input",{id:"postTitle",type:"text",required:!0,value:n,onChange:function(t){return o(t.target.value)}}),Object(j.jsx)("label",{htmlFor:"postBody",children:"\u6587\u7ae0\u5167\u5bb9:"}),Object(j.jsx)("textarea",{id:"postBody",required:!0,value:s,onChange:function(t){return a(t.target.value)}}),Object(j.jsx)("button",{type:"button",onClick:function(){return function(e){var c=Object(v.a)(new Date,"MMMM dd, yyyy pp");i({id:e,title:n,datetime:c,body:s}),t("/post/".concat(e))}(r.id)},children:"\u63d0\u4ea4"})]})]}),!n&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"\u627e\u4e0d\u5230\u6587\u7ae0"}),Object(j.jsx)("p",{children:Object(j.jsx)(l.b,{to:"/",children:"\u8fd4\u56de\u9996\u9801"})})]})]})},P=function(){return Object(j.jsxs)("main",{className:"About",children:[Object(j.jsx)("h2",{children:"About"}),Object(j.jsx)("p",{style:{marginTop:"1rem"},children:"\u6b64\u535a\u5ba2\u61c9\u7528\u7a0b\u5e8f\u662f Learn React \u6559\u7a0b\u7cfb\u5217\u4e2d\u7684\u4e00\u500b\u9805\u76ee"})]})},N=function(){return Object(j.jsxs)("main",{className:"Missing",children:[Object(j.jsx)("h2",{children:"\u7db2\u9801\u672a\u627e\u5230"}),Object(j.jsx)("p",{children:Object(j.jsx)(l.b,{to:"/",children:"\u8fd4\u56de\u9996\u9801"})})]})},B=n(9),E=n.n(B),T=n(11),S=n(13),k=n.n(S),C=function(t){var e=Object(c.useState)([]),n=Object(o.a)(e,2),s=n[0],r=n[1],i=Object(c.useState)(null),a=Object(o.a)(i,2),j=a[0],u=a[1],l=Object(c.useState)(!1),b=Object(o.a)(l,2),d=b[0],O=b[1];return Object(c.useEffect)((function(){var e=!0,n=k.a.CancelToken.source();(function(){var t=Object(T.a)(E.a.mark((function t(c){var s;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),t.prev=1,t.next=4,k.a.get(c,{cancelToken:n.token});case 4:s=t.sent,e&&(r(s.data),u(null)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e&&(u(t.t0.message),r([]));case 11:return t.prev=11,e&&O(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}})()(t);return function(){e=!1,n.cancel()}}),[t]),{data:s,fetchError:j,isLoading:d}};var F=function(){var t=Object(b.f)((function(t){return t.setPosts})),e=C("http://localhost:3500/posts"),n=e.data,s=e.fetchError,r=e.isLoading;return Object(c.useEffect)((function(){t(n)}),[n,t]),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"title",children:[Object(j.jsx)("div",{children:"React Router v6 \u8def\u7531"}),Object(j.jsx)("div",{children:"axios \u8acb\u6c42\uff1aget \u7372\u53d6\u3001post \u767c\u9001 \u65b0\u589e\u3001put \u653e\u7f6e \u66f4\u65b0\u3001delete \u522a\u9664"}),Object(j.jsx)("div",{children:"Easy Peasy v5 \u5341\u5206\u7c21\u55ae\u72c0\u614b\u7ba1\u7406"})]}),Object(j.jsx)("div",{className:"demo-box",children:Object(j.jsx)(h.d,{children:Object(j.jsxs)(h.b,{path:"/",element:Object(j.jsx)(f,{}),children:[Object(j.jsx)(h.b,{index:!0,element:Object(j.jsx)(m,{isLoading:r,fetchError:s})}),Object(j.jsxs)(h.b,{path:"post",children:[Object(j.jsx)(h.b,{index:!0,element:Object(j.jsx)(g,{})}),Object(j.jsx)(h.b,{path:":id",element:Object(j.jsx)(y,{})})]}),Object(j.jsx)(h.b,{path:"/edit/:id",element:Object(j.jsx)(w,{})}),Object(j.jsx)(h.b,{path:"about",element:Object(j.jsx)(P,{})}),Object(j.jsx)(h.b,{path:"*",element:Object(j.jsx)(N,{})})]})})})]})},M=n(26),L=n(25),R=k.a.create({baseURL:"http://localhost:3500"}),D=Object(b.d)({posts:[],setPosts:Object(b.b)((function(t,e){t.posts=e})),postTitle:"",setPostTitle:Object(b.b)((function(t,e){t.postTitle=e})),postBody:"",setPostBody:Object(b.b)((function(t,e){t.postBody=e})),editTitle:"",setEditTitle:Object(b.b)((function(t,e){t.editTitle=e})),editBody:"",setEditBody:Object(b.b)((function(t,e){t.editBody=e})),search:"",setSearch:Object(b.b)((function(t,e){t.search=e})),searchResults:[],setSearchResults:Object(b.b)((function(t,e){t.searchResults=e})),postCount:Object(b.c)((function(t){return t.posts.length})),getPostById:Object(b.c)((function(t){return function(e){return t.posts.find((function(t){return t.id.toString()===e}))}})),addPost:Object(b.e)(function(){var t=Object(T.a)(E.a.mark((function t(e,n,c){var s,r,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c.getState(),r=s.posts,t.prev=1,t.next=4,R.post("/posts",n);case 4:i=t.sent,e.setPosts([].concat(Object(L.a)(r),[i.data])),e.setPostTitle(""),e.setPostBody(""),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log("Error: ".concat(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n,c){return t.apply(this,arguments)}}()),deletePost:Object(b.e)(function(){var t=Object(T.a)(E.a.mark((function t(e,n,c){var s,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c.getState(),r=s.posts,t.prev=1,t.next=4,R.delete("/posts/".concat(n));case 4:e.setPosts(r.filter((function(t){return t.id!==n}))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("Error: ".concat(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,c){return t.apply(this,arguments)}}()),editPost:Object(b.e)(function(){var t=Object(T.a)(E.a.mark((function t(e,n,c){var s,r,i,o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c.getState(),r=s.posts,i=n.id,t.prev=2,t.next=5,R.put("/posts/".concat(i),n);case 5:o=t.sent,e.setPosts(r.map((function(t){return t.id===i?Object(M.a)({},o.data):t}))),e.setEditTitle(""),e.setEditBody(""),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log("Error: ".concat(t.t0.message));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,n,c){return t.apply(this,arguments)}}())});i.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(b.a,{store:D,children:Object(j.jsx)(l.a,{children:Object(j.jsx)(h.d,{children:Object(j.jsx)(h.b,{path:"/*",element:Object(j.jsx)(F,{})})})})})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.54ba48ff.chunk.js.map